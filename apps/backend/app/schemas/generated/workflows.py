# generated by datamodel-codegen:
#   filename:  workflows.json
#   timestamp: 2026-01-27T20:14:06+00:00

from __future__ import annotations

from typing import Any
from uuid import UUID

from pydantic import AwareDatetime, BaseModel, Field


class WorkflowExecutionRequest(BaseModel):
    workflow_id: UUID | None = None
    workflow_name: str
    workflow_definition_id: UUID
    document_ids: list[UUID] | None = None
    metadata: dict[str, Any] | None = None


class WorkflowCreateRequest(BaseModel):
    workflow_definition_id: UUID
    workflow_name: str | None = 'Untitled'


class WorkflowExecutionResponse(BaseModel):
    workflow_id: UUID | None = None


class StageMetrics(BaseModel):
    stage_name: str | None = None
    status: str | None = None
    started_at: AwareDatetime | None = None
    completed_at: AwareDatetime | None = None
    duration_seconds: float | None = None


class DocumentSummary(BaseModel):
    document_id: UUID | None = None
    document_name: str | None = None
    file_name: str | None = None
    page_count: int | None = None
    status: str | None = None
    uploaded_at: AwareDatetime | None = None


class WorkflowMetrics(BaseModel):
    documents_total: int | None = None
    documents_completed: int | None = None
    documents_failed: int | None = None
    documents_processing: int | None = None
    progress_percent: int | None = None
    total_duration_seconds: float | None = None


class EventLogItem(BaseModel):
    event_type: str | None = None
    event_payload: dict[str, Any] | None = None
    created_at: AwareDatetime | None = None


class Workflow(BaseModel):
    id: UUID | None = None
    definition_id: UUID | None = None
    workflow_name: str | None = None
    definition_name: str | None = None
    key: str | None = None
    status: str | None = None
    created_at: AwareDatetime | None = None
    updated_at: AwareDatetime | None = None
    duration_seconds: float | None = None


class WorkflowResponse(BaseModel):
    id: UUID | None = None
    definition_id: UUID | None = None
    workflow_name: str | None = None
    definition_name: str | None = None
    key: str | None = None
    status: str | None = None
    created_at: AwareDatetime | None = None
    updated_at: AwareDatetime | None = None
    duration_seconds: float | None = None


class WorkflowExtractRequest(BaseModel):
    pdf_url: str = Field(..., description='URL of the PDF document to extract')


class WorkflowDefinitionResponse(BaseModel):
    id: UUID | None = None
    name: str | None = None
    key: str | None = None
    description: str | None = None
    created_at: AwareDatetime | None = None


class WorkflowStatusResponse(BaseModel):
    workflow_id: str | None = None
    status: str | None = None
    progress: float | None = None
    current_step: str | None = None
    error: str | None = None


class Section(BaseModel):
    section_type: str | None = None
    fields: dict[str, Any] | None = None
    confidence: float | None = None


class Entity(BaseModel):
    entity_type: str | None = None
    fields: dict[str, Any] | None = None
    confidence: float | None = None


class ExtractedData(BaseModel):
    sections: list[Section] | None = None
    entities: list[Entity] | None = None


class WorkflowExtractedDataResponse(BaseModel):
    workflow_id: UUID | None = None
    document_id: UUID | None = None
    extracted_data: ExtractedData | None = None


class ResponseMeta(BaseModel):
    timestamp: AwareDatetime
    request_id: str
    api_version: str


class ErrorDetail(BaseModel):
    title: str
    status: int
    detail: str
    instance: str | None = None
    request_id: str
    timestamp: AwareDatetime


class WorkflowListItem(BaseModel):
    id: UUID | None = None
    temporal_workflow_id: str | None = None
    workflow_name: str | None = None
    definition_name: str | None = None
    workflow_type: str | None = None
    status: str | None = None
    metrics: WorkflowMetrics | None = None
    created_at: AwareDatetime | None = None
    updated_at: AwareDatetime | None = None
    duration_seconds: float | None = None
    documents: list[DocumentSummary] | None = None
    stages: list[StageMetrics] | None = None
    recent_events: list[EventLogItem] | None = None


class ApiResponse(BaseModel):
    status: bool
    message: str
    data: dict[str, Any]
    meta: ResponseMeta


class WorkflowListResponse(BaseModel):
    total: int | None = None
    workflows: list[WorkflowListItem] | None = None
